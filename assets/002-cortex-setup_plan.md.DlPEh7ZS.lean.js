import{_ as c,C as p,o as s,c as h,a2 as l,b as o,w as t,a,E as n,a3 as d,j as r}from"./chunks/framework.C-cuuT8Z.js";const y=JSON.parse('{"title":"Implementation Plan: Cortex Bootstrap Service","description":"","frontmatter":{},"headers":[],"relativePath":"002-cortex-setup/plan.md","filePath":"002-cortex-setup/plan.md","lastUpdated":1772310733000}'),g={name:"002-cortex-setup/plan.md"};function u(A,e,k,m,E,b){const i=p("Mermaid");return s(),h("div",null,[e[5]||(e[5]=l("",15)),(s(),o(d,null,{default:t(()=>[n(i,{id:"mermaid-239",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20subgraph%20Triggers%0A%20%20%20%20%20%20%20%20CLI%5Bcortex%20bootstrap%5CnCobra%20CLI%5D%0A%20%20%20%20%20%20%20%20HTTP%5BPOST%20%2Fapi%2Fv1%2Fbootstrap%5CnGin%20API%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Cortex%5B%22services%2Fcortex%2F%22%5D%0A%20%20%20%20%20%20%20%20Cobra%5Bcmd%2Fcortex%2Fbootstrap.go%5D%0A%20%20%20%20%20%20%20%20Gin%5Bcmd%2Fcortex%2Fserver.go%5D%0A%20%20%20%20%20%20%20%20Handler%5Binternal%2Fapi%2Fhandlers.go%5D%0A%20%20%20%20%20%20%20%20Orchestrator%5Binternal%2Forchestrator%2Fservice.go%5CnRunBootstrap%20%C2%B7%20RunDeepHealth%5D%0A%20%20%20%20%20%20%20%20Config%5Binternal%2Fconfig%2Fconfig.go%5CnViper%5D%0A%20%20%20%20%20%20%20%20Telemetry%5Binternal%2Ftelemetry%2Ffriday.go%5CnOTEL%20Provider%5D%0A%0A%20%20%20%20%20%20%20%20subgraph%20Clients%5B%22internal%2Fclients%2F%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20NATS%5Bnats.go%5Cn%2B%20circuit%20breaker%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20Pulsar%5Bpulsar.go%5Cn%2B%20circuit%20breaker%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20PG%5Bpostgres.go%5Cn%2B%20circuit%20breaker%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20Redis%5Bredis.go%5Cn%2B%20circuit%20breaker%5D%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Infra%5B%22Infrastructure%22%5D%0A%20%20%20%20%20%20%20%20Flash%5B(arc-messaging%5CnNATS%20%3A4222)%5D%0A%20%20%20%20%20%20%20%20Strange%5B(arc-streaming%5CnPulsar%20%3A8080%20%2F%20%3A6650)%5D%0A%20%20%20%20%20%20%20%20Oracle%5B(arc-sql-db%5CnPG%20%3A5432)%5D%0A%20%20%20%20%20%20%20%20Sonic%5B(arc-cache%5CnRedis%20%3A6379)%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Observability%5B%22Observability%22%5D%0A%20%20%20%20%20%20%20%20Widow%5Barc-friday-collector%5Cn%3A4317%20gRPC%5D%0A%20%20%20%20%20%20%20%20Friday%5Barc-friday%5CnSigNoz%5D%0A%20%20%20%20end%0A%0A%20%20%20%20CLI%20--%3E%20Cobra%20--%3E%20Orchestrator%0A%20%20%20%20HTTP%20--%3E%20Gin%20--%3E%20Handler%20--%3E%20Orchestrator%0A%20%20%20%20Orchestrator%20--%3E%20Config%0A%20%20%20%20Orchestrator%20--%3E%20Telemetry%0A%20%20%20%20Orchestrator%20--%3E%20NATS%20--%3E%20Flash%0A%20%20%20%20Orchestrator%20--%3E%20Pulsar%20--%3E%20Strange%0A%20%20%20%20Orchestrator%20--%3E%20PG%20--%3E%20Oracle%0A%20%20%20%20Orchestrator%20--%3E%20Redis%20--%3E%20Sonic%0A%20%20%20%20Telemetry%20-.-%3E%7COTLP%20gRPC%7C%20Widow%20-.-%3E%20Friday%0A%0A%20%20%20%20classDef%20core%20fill%3A%232b2d42%2Cstroke%3A%238d99ae%2Ccolor%3A%23fff%0A%20%20%20%20classDef%20infra%20fill%3A%23ef233c%2Cstroke%3A%232b2d42%2Ccolor%3A%23fff%0A%20%20%20%20classDef%20obs%20fill%3A%236d6875%2Cstroke%3A%232b2d42%2Ccolor%3A%23fff%0A%20%20%20%20class%20Orchestrator%2CConfig%2CTelemetry%20core%0A%20%20%20%20class%20Flash%2CStrange%2COracle%2CSonic%20infra%0A%20%20%20%20class%20Widow%2CFriday%20obs%0A"})]),fallback:t(()=>[...e[0]||(e[0]=[a(" Loading... ",-1)])]),_:1})),e[6]||(e[6]=r("h3",{id:"bootstrap-phase-sequence-parallel-execution",tabindex:"-1"},[a("Bootstrap Phase Sequence (Parallel Execution) "),r("a",{class:"header-anchor",href:"#bootstrap-phase-sequence-parallel-execution","aria-label":'Permalink to "Bootstrap Phase Sequence (Parallel Execution)"'},"​")],-1)),(s(),o(d,null,{default:t(()=>[n(i,{id:"mermaid-243",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20T%20as%20Trigger%20(HTTP%2FCLI)%0A%20%20%20%20participant%20O%20as%20Orchestrator%0A%20%20%20%20participant%20PG%20as%20arc-sql-db%0A%20%20%20%20participant%20N%20as%20arc-messaging%20(NATS)%0A%20%20%20%20participant%20P%20as%20arc-streaming%20(Pulsar)%0A%20%20%20%20participant%20R%20as%20arc-cache%20(Redis)%0A%20%20%20%20participant%20W%20as%20arc-widow%20(OTEL)%0A%0A%20%20%20%20T-%3E%3EO%3A%20RunBootstrap(ctx)%0A%20%20%20%20O-%3E%3EW%3A%20Start%20span%20%22cortex.bootstrap%22%0A%0A%20%20%20%20par%20Phase%201%20%E2%80%94%20Postgres%0A%20%20%20%20%20%20%20%20O-%3E%3EPG%3A%20ping%20%2B%20schema%20validate%0A%20%20%20%20%20%20%20%20PG--%3E%3EO%3A%20ok%0A%20%20%20%20and%20Phase%202%20%E2%80%94%20NATS%0A%20%20%20%20%20%20%20%20O-%3E%3EN%3A%20connect%20%2B%20create%203%20streams%0A%20%20%20%20%20%20%20%20N--%3E%3EO%3A%20streams%20ready%0A%20%20%20%20and%20Phase%203%20%E2%80%94%20Pulsar%0A%20%20%20%20%20%20%20%20O-%3E%3EP%3A%20create%20tenant%20%2B%203%20namespaces%20%2B%203%20topics%0A%20%20%20%20%20%20%20%20P--%3E%3EO%3A%20provisioned%0A%20%20%20%20and%20Phase%204%20%E2%80%94%20Redis%0A%20%20%20%20%20%20%20%20O-%3E%3ER%3A%20PING%0A%20%20%20%20%20%20%20%20R--%3E%3EO%3A%20PONG%0A%20%20%20%20end%0A%0A%20%20%20%20O-%3E%3EW%3A%20End%20span%20(success%2Ferror%20%2B%20phase%20durations)%0A%20%20%20%20O--%3E%3ET%3A%20BootstrapResult%7Bphases%3A%20%7Bpg%3Aok%2C%20nats%3Aok%2C%20pulsar%3Aok%2C%20redis%3Aok%7D%7D%0A"})]),fallback:t(()=>[...e[1]||(e[1]=[a(" Loading... ",-1)])]),_:1})),e[7]||(e[7]=r("h3",{id:"retry-circuit-breaker-flow-per-client",tabindex:"-1"},[a("Retry + Circuit Breaker Flow (per client) "),r("a",{class:"header-anchor",href:"#retry-circuit-breaker-flow-per-client","aria-label":'Permalink to "Retry + Circuit Breaker Flow (per client)"'},"​")],-1)),(s(),o(d,null,{default:t(()=>[n(i,{id:"mermaid-247",class:"mermaid",graph:"stateDiagram-v2%0A%20%20%20%20%5B*%5D%20--%3E%20Closed%0A%20%20%20%20Closed%20--%3E%20Open%3A%203%20consecutive%20failures%0A%20%20%20%20Open%20--%3E%20HalfOpen%3A%2030s%20elapsed%0A%20%20%20%20HalfOpen%20--%3E%20Closed%3A%20probe%20succeeds%0A%20%20%20%20HalfOpen%20--%3E%20Open%3A%20probe%20fails%0A%0A%20%20%20%20state%20Closed%20%7B%0A%20%20%20%20%20%20%20%20%5B*%5D%20--%3E%20Attempt%0A%20%20%20%20%20%20%20%20Attempt%20--%3E%20Success%3A%20ok%0A%20%20%20%20%20%20%20%20Attempt%20--%3E%20Backoff%3A%20error%0A%20%20%20%20%20%20%20%20Backoff%20--%3E%20Attempt%3A%202s%20%E2%86%92%204s%20%E2%86%92%208s%20%E2%80%A6%20max%2030s%5Cn(timeout%205m%20per%20phase)%0A%20%20%20%20%7D%0A"})]),fallback:t(()=>[...e[2]||(e[2]=[a(" Loading... ",-1)])]),_:1})),e[8]||(e[8]=r("h3",{id:"health-endpoint-behaviour",tabindex:"-1"},[a("Health Endpoint Behaviour "),r("a",{class:"header-anchor",href:"#health-endpoint-behaviour","aria-label":'Permalink to "Health Endpoint Behaviour"'},"​")],-1)),(s(),o(d,null,{default:t(()=>[n(i,{id:"mermaid-251",class:"mermaid",graph:"stateDiagram-v2%0A%20%20%20%20%5B*%5D%20--%3E%20Starting%0A%20%20%20%20Starting%20--%3E%20Ready%3A%20RunBootstrap()%20completes%0A%20%20%20%20Starting%20--%3E%20Ready%3A%20bootstrap%20fails%20(non-fatal)%0A%0A%20%20%20%20state%20Starting%20%7B%0A%20%20%20%20%20%20%20%20GET_health%3A%20%2Fhealth%20%E2%86%92%20200%20healthy%20(shallow)%0A%20%20%20%20%20%20%20%20GET_ready%3A%20%2Fready%20%E2%86%92%20503%20not-ready%0A%20%20%20%20%20%20%20%20POST_bootstrap%3A%20POST%20%2Fapi%2Fv1%2Fbootstrap%20%E2%86%92%20409%20if%20already%20running%0A%20%20%20%20%7D%0A%20%20%20%20state%20Ready%20%7B%0A%20%20%20%20%20%20%20%20GET_health2%3A%20%2Fhealth%20%E2%86%92%20200%20healthy%0A%20%20%20%20%20%20%20%20GET_ready2%3A%20%2Fready%20%E2%86%92%20200%20ok%0A%20%20%20%20%20%20%20%20GET_deep%3A%20%2Fhealth%2Fdeep%20%E2%86%92%20200%2F503%20per%20dep%20probe%0A%20%20%20%20%20%20%20%20Monitor%3A%20background%20goroutine%20probes%20every%2030s%0A%20%20%20%20%7D%0A"})]),fallback:t(()=>[...e[3]||(e[3]=[a(" Loading... ",-1)])]),_:1})),e[9]||(e[9]=l("",8)),(s(),o(d,null,{default:t(()=>[n(i,{id:"mermaid-453",class:"mermaid",graph:"gantt%0A%20%20%20%20title%20Cortex%20Implementation%20Phases%0A%20%20%20%20dateFormat%20%20YYYY-MM-DD%0A%20%20%20%20axisFormat%20%20Day%20%25d%0A%0A%20%20%20%20section%20Phase%201%20%E2%80%94%20Foundation%20(sequential%2C%20one%20agent)%0A%20%20%20%20go.mod%20%2B%20module%20scaffold%20%20%20%20%20%20%20%20%20%20%20%3Ap1a%2C%202026-02-22%2C%201d%0A%20%20%20%20Config%20(Viper%20structs%20%2B%20env%20map)%20%20%20%3Ap1b%2C%20after%20p1a%2C%201d%0A%20%20%20%20Telemetry%20(OTEL%20provider%20friday.go)%3Ap1c%2C%20after%20p1b%2C%201d%0A%20%20%20%20Cobra%20root%20%2B%20server%2Fbootstrap%20cmds%20%3Ap1d%2C%20after%20p1c%2C%201d%0A%0A%20%20%20%20section%20Phase%202%20%E2%80%94%20Parallel%20(4%20agents)%0A%20%20%20%20Client%3A%20NATS%20(nats.go%20%2B%20tests)%20%20%20%20%20%3Ap2a%2C%20after%20p1d%2C%202d%0A%20%20%20%20Client%3A%20Pulsar%20(pulsar.go%20%2B%20tests)%20%3Ap2b%2C%20after%20p1d%2C%202d%0A%20%20%20%20Client%3A%20Postgres%20(postgres.go%20%2B%20tests)%20%3Ap2c%2C%20after%20p1d%2C%202d%0A%20%20%20%20Client%3A%20Redis%20(redis.go%20%2B%20tests)%20%20%20%3Ap2d%2C%20after%20p1d%2C%201d%0A%0A%20%20%20%20section%20Phase%203%20%E2%80%94%20Integration%20(sequential)%0A%20%20%20%20Orchestrator%20(service.go%20%2B%20types.go)%3Ap3a%2C%20after%20p2a%2C%202d%0A%20%20%20%20API%20layer%20(server%2Fhandlers%2Fmiddleware)%3Ap3b%2C%20after%20p3a%2C%201d%0A%20%20%20%20Dockerfile%20%2B%20service.yaml%20%20%20%20%20%20%20%20%20%20%3Ap3c%2C%20after%20p3b%2C%201d%0A%0A%20%20%20%20section%20Phase%204%20%E2%80%94%20Wiring%20%26%20Validation%0A%20%20%20%20main.go%20DI%20wiring%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ap4a%2C%20after%20p3c%2C%201d%0A%20%20%20%20Integration%20%2B%20health%20endpoint%20tests%20%3Ap4b%2C%20after%20p4a%2C%201d%0A%20%20%20%20Docs%20%2B%20config.yaml%20%2B%20profiles.yaml%20%3Ap4c%2C%20after%20p3c%2C%201d%0A"})]),fallback:t(()=>[...e[4]||(e[4]=[a(" Loading... ",-1)])]),_:1})),e[10]||(e[10]=l("",22))])}const C=c(g,[["render",u]]);export{y as __pageData,C as default};
